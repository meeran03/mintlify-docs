---
title: 'Create Graph'
api: 'POST /api/v1/assistant-graphs'
description: 'Create a new assistant graph with nodes and edges'
---

Create a new multi-assistant orchestration graph that defines how conversations flow between different specialized assistants based on various conditions.

## Request Body

<ParamField body="name" type="string" required>
  Name of the assistant graph. Must be unique within your organization.
</ParamField>

<ParamField body="description" type="string">
  Human-readable description of the graph's purpose.
</ParamField>

<ParamField body="configuration" type="object">
  Optional graph-level configuration settings.
</ParamField>

<ParamField body="nodes" type="array">
  Array of nodes to create with the graph.

  <Expandable title="Node properties">
    <ParamField body="assistant_id" type="integer" required>
      ID of the assistant for this node. Must belong to your organization.
    </ParamField>

    <ParamField body="node_type" type="string" default="standard">
      Type of node. One of: `entry`, `standard`, `exit`, `escalation`
    </ParamField>

    <ParamField body="position" type="object">
      Position in the visual graph builder UI.
      <Expandable title="Position properties">
        <ParamField body="x" type="number">X coordinate</ParamField>
        <ParamField body="y" type="number">Y coordinate</ParamField>
      </Expandable>
    </ParamField>

    <ParamField body="configuration" type="object">
      Node-specific configuration.
      <Expandable title="Configuration properties">
        <ParamField body="knowledge_base_files" type="array">Array of document IDs for this node</ParamField>
        <ParamField body="custom_tools" type="array">Array of tool IDs for this node</ParamField>
        <ParamField body="max_session_duration" type="integer">Max session duration in minutes</ParamField>
        <ParamField body="custom_settings" type="object">Node-specific settings</ParamField>
      </Expandable>
    </ParamField>
  </Expandable>
</ParamField>

<ParamField body="edges" type="array">
  Array of edges (transitions) to create with the graph.

  <Expandable title="Edge properties">
    <ParamField body="from_node_id" type="integer" required>
      Index of the source node in the nodes array (0-based).
    </ParamField>

    <ParamField body="to_node_id" type="integer" required>
      Index of the target node in the nodes array (0-based).
    </ParamField>

    <ParamField body="condition_type" type="string" required>
      Type of condition. One of: `intent`, `natural_language`, `mathematical`, `state_variable`
    </ParamField>

    <ParamField body="intent_pattern" type="string">
      Comma-separated intent keywords for intent-based transitions.
    </ParamField>

    <ParamField body="natural_language_trigger" type="string">
      Natural language description for LLM-evaluated transitions.
    </ParamField>

    <ParamField body="mathematical_expression" type="string">
      Mathematical expression for expression-based transitions.
    </ParamField>

    <ParamField body="state_variable_condition" type="object">
      State variable condition for variable-based transitions.
    </ParamField>

    <ParamField body="condition_logic" type="string" default="AND">
      Logic for combining multiple conditions: `AND` or `OR`
    </ParamField>

    <ParamField body="priority" type="integer" default="0">
      Priority for condition evaluation. Lower numbers = higher priority.
    </ParamField>

    <ParamField body="handoff_sentence" type="string">
      Custom message spoken during the transition.
    </ParamField>

    <ParamField body="description" type="string">
      Human-readable description of the edge.
    </ParamField>
  </Expandable>
</ParamField>

## Response

<ResponseField name="id" type="integer">
  Unique identifier for the graph.
</ResponseField>

<ResponseField name="organization_id" type="integer">
  Organization that owns this graph.
</ResponseField>

<ResponseField name="name" type="string">
  Name of the graph.
</ResponseField>

<ResponseField name="description" type="string">
  Description of the graph.
</ResponseField>

<ResponseField name="is_active" type="boolean">
  Whether the graph is active.
</ResponseField>

<ResponseField name="configuration" type="object">
  Graph configuration settings.
</ResponseField>

<ResponseField name="nodes" type="array">
  Array of created nodes with their IDs.
</ResponseField>

<ResponseField name="edges" type="array">
  Array of created edges with their IDs.
</ResponseField>

<ResponseField name="total_nodes" type="integer">
  Total number of nodes in the graph.
</ResponseField>

<ResponseField name="total_edges" type="integer">
  Total number of edges in the graph.
</ResponseField>

<ResponseField name="created_at" type="string">
  ISO 8601 timestamp of creation.
</ResponseField>

<ResponseField name="updated_at" type="string">
  ISO 8601 timestamp of last update.
</ResponseField>

<RequestExample>
```bash cURL
curl -X POST https://api.burki.dev/api/v1/assistant-graphs \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "Customer Service Router",
    "description": "Routes customers to the appropriate department",
    "nodes": [
      {
        "assistant_id": 1,
        "node_type": "entry",
        "position": {"x": 0, "y": 0}
      },
      {
        "assistant_id": 2,
        "node_type": "standard",
        "position": {"x": 200, "y": -100}
      },
      {
        "assistant_id": 3,
        "node_type": "standard",
        "position": {"x": 200, "y": 100}
      }
    ],
    "edges": [
      {
        "from_node_id": 0,
        "to_node_id": 1,
        "condition_type": "intent",
        "intent_pattern": "sales,purchase,buy",
        "priority": 1,
        "handoff_sentence": "Let me connect you with our sales team."
      },
      {
        "from_node_id": 0,
        "to_node_id": 2,
        "condition_type": "intent",
        "intent_pattern": "support,help,issue,problem",
        "priority": 1,
        "handoff_sentence": "I will transfer you to our support team."
      }
    ]
  }'
```

```python Python
import requests

response = requests.post(
    "https://api.burki.dev/api/v1/assistant-graphs",
    headers={"Authorization": "Bearer YOUR_API_KEY"},
    json={
        "name": "Customer Service Router",
        "description": "Routes customers to the appropriate department",
        "nodes": [
            {
                "assistant_id": 1,
                "node_type": "entry",
                "position": {"x": 0, "y": 0}
            },
            {
                "assistant_id": 2,
                "node_type": "standard",
                "position": {"x": 200, "y": -100}
            }
        ],
        "edges": [
            {
                "from_node_id": 0,
                "to_node_id": 1,
                "condition_type": "intent",
                "intent_pattern": "sales,purchase,buy",
                "priority": 1,
                "handoff_sentence": "Let me connect you with our sales team."
            }
        ]
    }
)

graph = response.json()
print(f"Created graph: {graph['name']} (ID: {graph['id']})")
```

```javascript JavaScript
const response = await fetch('https://api.burki.dev/api/v1/assistant-graphs', {
  method: 'POST',
  headers: {
    'Authorization': 'Bearer YOUR_API_KEY',
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    name: 'Customer Service Router',
    description: 'Routes customers to the appropriate department',
    nodes: [
      {
        assistant_id: 1,
        node_type: 'entry',
        position: { x: 0, y: 0 }
      },
      {
        assistant_id: 2,
        node_type: 'standard',
        position: { x: 200, y: -100 }
      }
    ],
    edges: [
      {
        from_node_id: 0,
        to_node_id: 1,
        condition_type: 'intent',
        intent_pattern: 'sales,purchase,buy',
        priority: 1,
        handoff_sentence: 'Let me connect you with our sales team.'
      }
    ]
  })
});

const graph = await response.json();
console.log(`Created graph: ${graph.name} (ID: ${graph.id})`);
```
</RequestExample>

<ResponseExample>
```json Response
{
  "id": 1,
  "organization_id": 1,
  "name": "Customer Service Router",
  "description": "Routes customers to the appropriate department",
  "is_active": true,
  "configuration": {},
  "nodes": [
    {
      "id": 101,
      "graph_id": 1,
      "assistant_id": 1,
      "node_type": "entry",
      "position": {"x": 0, "y": 0},
      "configuration": {},
      "created_at": "2025-01-19T10:00:00Z",
      "assistant_name": "Receptionist",
      "assistant_description": "Greets callers and routes to departments"
    },
    {
      "id": 102,
      "graph_id": 1,
      "assistant_id": 2,
      "node_type": "standard",
      "position": {"x": 200, "y": -100},
      "configuration": {},
      "created_at": "2025-01-19T10:00:00Z",
      "assistant_name": "Sales Specialist",
      "assistant_description": "Handles sales inquiries"
    },
    {
      "id": 103,
      "graph_id": 1,
      "assistant_id": 3,
      "node_type": "standard",
      "position": {"x": 200, "y": 100},
      "configuration": {},
      "created_at": "2025-01-19T10:00:00Z",
      "assistant_name": "Support Agent",
      "assistant_description": "Handles support requests"
    }
  ],
  "edges": [
    {
      "id": 201,
      "graph_id": 1,
      "from_node_id": 101,
      "to_node_id": 102,
      "condition_type": "intent",
      "intent_pattern": "sales,purchase,buy",
      "natural_language_trigger": null,
      "mathematical_expression": null,
      "state_variable_condition": null,
      "condition_logic": "AND",
      "priority": 1,
      "is_active": true,
      "handoff_sentence": "Let me connect you with our sales team.",
      "description": null,
      "created_at": "2025-01-19T10:00:00Z",
      "updated_at": "2025-01-19T10:00:00Z"
    },
    {
      "id": 202,
      "graph_id": 1,
      "from_node_id": 101,
      "to_node_id": 103,
      "condition_type": "intent",
      "intent_pattern": "support,help,issue,problem",
      "natural_language_trigger": null,
      "mathematical_expression": null,
      "state_variable_condition": null,
      "condition_logic": "AND",
      "priority": 1,
      "is_active": true,
      "handoff_sentence": "I will transfer you to our support team.",
      "description": null,
      "created_at": "2025-01-19T10:00:00Z",
      "updated_at": "2025-01-19T10:00:00Z"
    }
  ],
  "total_nodes": 3,
  "total_edges": 2,
  "created_at": "2025-01-19T10:00:00Z",
  "updated_at": "2025-01-19T10:00:00Z"
}
```
</ResponseExample>

## Error Responses

| Status Code | Description |
|-------------|-------------|
| 400 | Invalid request body or assistant not found |
| 401 | Unauthorized - Invalid or missing API key |
| 500 | Server error creating the graph |

<Note>
When creating edges, `from_node_id` and `to_node_id` refer to the **index** of the node in the `nodes` array (0-based), not the database ID. The actual node IDs are assigned after creation.
</Note>
