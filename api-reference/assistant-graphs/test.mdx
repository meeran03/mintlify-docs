---
title: 'Test Graph Flow'
api: 'POST /api/v1/assistant-graphs/{graph_id}/test'
description: 'Simulate a conversation through the graph to test transition conditions'
---

Test a graph flow with simulated messages. This endpoint allows you to validate transition conditions and conversation paths without making actual phone calls.

## Path Parameters

<ParamField path="graph_id" type="integer" required>
  The unique identifier of the graph to test.
</ParamField>

## Request Body

<ParamField body="test_messages" type="array" required>
  Array of simulated user messages to process through the graph.
</ParamField>

<ParamField body="starting_node_id" type="integer">
  Optional node ID to start from. Defaults to the graph's entry node.
</ParamField>

## Response

<ResponseField name="success" type="boolean">
  Whether the test completed successfully.
</ResponseField>

<ResponseField name="graph_id" type="integer">
  The tested graph ID.
</ResponseField>

<ResponseField name="test_messages" type="array">
  The messages that were tested.
</ResponseField>

<ResponseField name="starting_node_id" type="integer">
  The node where the test started.
</ResponseField>

<ResponseField name="path_taken" type="array">
  Array of nodes visited during the test simulation.
</ResponseField>

<ResponseField name="transitions" type="array">
  Details of each transition that occurred.
</ResponseField>

<RequestExample>
```bash cURL
curl -X POST https://api.burki.dev/api/v1/assistant-graphs/1/test \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "test_messages": [
      "Hello, I need help",
      "I want to buy your enterprise plan",
      "What are the pricing options?"
    ]
  }'
```

```bash cURL (start from specific node)
curl -X POST https://api.burki.dev/api/v1/assistant-graphs/1/test \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "test_messages": ["I am very frustrated with your service"],
    "starting_node_id": 102
  }'
```

```python Python
import requests

response = requests.post(
    "https://api.burki.dev/api/v1/assistant-graphs/1/test",
    headers={"Authorization": "Bearer YOUR_API_KEY"},
    json={
        "test_messages": [
            "Hello, I need help",
            "I want to buy your enterprise plan",
            "What are the pricing options?"
        ]
    }
)

result = response.json()
print("Path taken:")
for node in result.get('path_taken', []):
    print(f"  -> {node}")
```

```javascript JavaScript
const response = await fetch('https://api.burki.dev/api/v1/assistant-graphs/1/test', {
  method: 'POST',
  headers: {
    'Authorization': 'Bearer YOUR_API_KEY',
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    test_messages: [
      'Hello, I need help',
      'I want to buy your enterprise plan',
      'What are the pricing options?'
    ]
  })
});

const result = await response.json();
console.log('Path taken:');
result.path_taken?.forEach(node => {
  console.log(`  -> ${node}`);
});
```
</RequestExample>

<ResponseExample>
```json Response
{
  "success": true,
  "graph_id": 1,
  "test_messages": [
    "Hello, I need help",
    "I want to buy your enterprise plan",
    "What are the pricing options?"
  ],
  "starting_node_id": 101,
  "path_taken": [
    {
      "node_id": 101,
      "node_name": "Receptionist",
      "message_processed": "Hello, I need help"
    },
    {
      "node_id": 102,
      "node_name": "Sales Specialist",
      "message_processed": "I want to buy your enterprise plan",
      "transition_reason": "Intent matched: purchase, buy"
    },
    {
      "node_id": 102,
      "node_name": "Sales Specialist",
      "message_processed": "What are the pricing options?",
      "transition_reason": "No transition triggered"
    }
  ],
  "transitions": [
    {
      "from_node": "Receptionist",
      "to_node": "Sales Specialist",
      "triggered_by_message": "I want to buy your enterprise plan",
      "condition_type": "intent",
      "matched_condition": "sales,purchase,buy",
      "handoff_sentence": "Let me connect you with our sales team."
    }
  ],
  "summary": {
    "total_messages": 3,
    "total_transitions": 1,
    "final_node": "Sales Specialist"
  }
}
```
</ResponseExample>

## Testing Scenarios

### Test Sales Routing

```json
{
  "test_messages": [
    "Hi there",
    "I'm interested in your product",
    "How much does it cost?"
  ]
}
```

**Expected**: Routes from Receptionist → Sales Specialist

### Test Support Routing

```json
{
  "test_messages": [
    "Hello",
    "I have a problem with my account",
    "It's not working properly"
  ]
}
```

**Expected**: Routes from Receptionist → Support Agent

### Test Escalation

```json
{
  "test_messages": [
    "I am extremely frustrated",
    "This is unacceptable",
    "I want to speak to a manager"
  ],
  "starting_node_id": 103
}
```

**Expected**: Routes from Support Agent → Human Escalation

## Best Practices

<Steps>
  <Step title="Test All Paths">
    Create test cases for each possible transition path in your graph to ensure complete coverage.
  </Step>
  
  <Step title="Test Edge Cases">
    Include messages that might match multiple conditions to verify priority handling works correctly.
  </Step>
  
  <Step title="Test Natural Language">
    For natural language conditions, test various phrasings to ensure the LLM evaluation works as expected.
  </Step>
  
  <Step title="Verify Handoffs">
    Check that the correct handoff sentences are returned for each transition.
  </Step>
</Steps>

## Error Responses

| Status Code | Description |
|-------------|-------------|
| 401 | Unauthorized - Invalid or missing API key |
| 404 | Graph not found in your organization |
| 500 | Server error during test |

<Note>
The test endpoint simulates conversation flow without actually executing assistant responses. It evaluates transition conditions based on the provided messages to show you the path a real conversation would take.
</Note>
