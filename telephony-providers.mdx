---
title: Telephony Providers
description: "Configure Twilio, Telnyx, or BYO SIP Trunk for your voice AI assistants"
---

<Callout type="info">
Burki Voice AI supports Twilio, Telnyx, and BYO (Bring Your Own) SIP Trunk as telephony providers. You can use different providers for different assistants, enabling cost optimization and redundancy.
</Callout>

---

## Provider Comparison

<CardGroup cols={3}>
  <Card title="üè¢ Twilio" icon="phone">
    **Traditional Leader**
    
    - Mature, feature-rich platform
    - Global presence and reliability
    - Extensive documentation and community
    - Higher pricing on calls
    - Media Streams for real-time audio
    - SMS/MMS messaging support
  </Card>
  
  <Card title="‚ö° Telnyx" icon="lightning">
    **Modern Alternative**
    
    - Competitive pricing (often 50%+ savings)
    - Call Control API for advanced features
    - Developer-friendly modern APIs
    - SMS/MMS messaging support
    - Global carrier-grade network
    - WebRTC and SIP support
  </Card>
  
  <Card title="üîß BYO SIP Trunk" icon="network-wired">
    **Maximum Flexibility**
    
    - Use any SIP provider (Zadarma, VoIP.ms, etc.)
    - Potentially lowest costs
    - Full control over infrastructure
    - Supports SIP REFER for call transfers
    - Voice calls only (no SMS typically)
    - Requires SIP provider configuration
  </Card>
</CardGroup>

---

## Provider Selection Logic

The system automatically determines which provider to use based on this priority:

<Steps>
  <Step title="Assistant-Level Credentials">
    Check if the assistant has `telnyx_config` or `twilio_config` configured
    
    **Priority:** Telnyx > Twilio if both are present
  </Step>
  
  <Step title="Organization-Level Credentials">
    Fallback to organization-level telephony credentials
    
    **Priority:** Telnyx > Twilio if both are present
  </Step>
  
  <Step title="Environment Variables">
    Use system-wide environment variables as last resort
    
    **Priority:** Telnyx > Twilio if both are present
  </Step>
</Steps>

---

## Twilio Setup

<Accordion title="Twilio Configuration">

### 1. Account Setup
- Sign up at [Twilio Console](https://console.twilio.com/)
- Purchase a phone number
- Enable Media Streams on your account

### 2. Webhook Configuration
Set your Twilio webhook URL to:
```
https://yourdomain.com/twiml
```

### 3. Credentials
**Environment Variables (Global):**
```env
TWILIO_ACCOUNT_SID=ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
TWILIO_AUTH_TOKEN=your_twilio_auth_token
```

**Per-Assistant (API):**
```json
{
  "twilio_config": {
    "account_sid": "ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",
    "auth_token": "your_twilio_auth_token"
  }
}
```

### 4. Features
- ‚úÖ Inbound/Outbound calls
- ‚úÖ Call recording
- ‚úÖ Call transfer
- ‚úÖ Real-time audio streaming
- ‚úÖ SMS capabilities
- ‚úÖ Global phone numbers

</Accordion>

---

## Telnyx Setup

<Accordion title="Telnyx Configuration">

### 1. Account Setup
- Sign up at [Telnyx Portal](https://portal.telnyx.com/)
- Purchase a phone number
- Create a Call Control Application

### 2. Call Control Application
1. Go to **Call Control > Applications**
2. Create a new application
3. Set webhook URL to:
   ```
   https://yourdomain.com/telnyx-webhook
   ```
4. Enable **Answering Machine Detection** (optional)
5. Save and note the **Connection ID**

### 3. Credentials
**Environment Variables (Global):**
```env
TELNYX_API_KEY=KEYxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
TELNYX_CONNECTION_ID=1234567890
```

**Per-Assistant (API):**
```json
{
  "telnyx_config": {
    "api_key": "KEYxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",
    "connection_id": "1234567890"
  }
}
```

### 4. Features
- ‚úÖ Inbound/Outbound calls
- ‚úÖ Call recording
- ‚úÖ Call transfer
- ‚úÖ WebRTC support
- ‚úÖ SMS capabilities
- ‚úÖ Competitive pricing
- ‚ö†Ô∏è WebSocket audio streaming (planned)

</Accordion>

---

## BYO SIP Trunk Setup

<Accordion title="BYO SIP Trunk Configuration">

### 1. Overview
Bring Your Own (BYO) SIP Trunk allows you to integrate any SIP-based telephony provider with Burki Voice AI. This is ideal for:
- Cost optimization with existing SIP provider relationships
- Regional/specialized SIP providers (Zadarma, VoIP.ms, etc.)
- Full control over telephony infrastructure
- Integration with on-premise PBX systems

### 2. Prerequisites
Before setting up BYO SIP trunk:
- Purchase phone numbers from your SIP provider
- Obtain SIP gateway address (e.g., `sip.zadarma.com`, `sip.voip.ms`)
- Get SIP authentication credentials (username/password) or configure IP authentication
- Configure your provider to forward calls to Burki

### 3. Network Requirements
Ensure your SIP provider allows traffic to/from these IPs:
```
44.229.228.186/32
44.238.177.138/32
```

<Warning>
IP-based authentication can cause routing issues on shared infrastructure. Use credential-based authentication when possible.
</Warning>

### 4. Organization-Level Configuration

**Environment Variables (Global):**
```env
SIP_GATEWAY=sip.zadarma.com
SIP_USERNAME=15551234567
SIP_PASSWORD=your_sip_password
```

**API Configuration:**
```bash
curl -X PUT "https://yourdomain.com/api/v1/organizations/{org_id}" \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "sip_gateway": "sip.zadarma.com",
    "sip_username": "15551234567",
    "sip_password": "your_sip_password",
    "sip_trunk_config": {
      "sip_domain": "zadarma.com",
      "inbound_enabled": true,
      "outbound_leading_plus_enabled": true,
      "auth_plan": {
        "type": "credentials",
        "username": "15551234567",
        "password": "your_sip_password"
      }
    }
  }'
```

### 5. Register Phone Numbers

Register your existing SIP phone numbers with Burki:

```bash
curl -X POST "https://yourdomain.com/api/v1/phone-numbers/purchase" \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "phone_number": "+15551234567",
    "provider": "byo-sip-trunk",
    "friendly_name": "My SIP Number",
    "assistant_id": 123
  }'
```

### 6. Configure Provider Webhooks

Configure your SIP provider to forward inbound calls to:
```
https://yourdomain.com/sip-webhook
```

For specific SIP URI format (varies by provider):
```
sip:{phone_number}@{your-burki-domain}.com
```

### 7. Outbound Calls

Initiate outbound calls through your SIP trunk:

```bash
curl -X POST "https://yourdomain.com/api/v1/calls/initiate" \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "to_phone_number": "+15557654321",
    "from_phone_number": "+15551234567",
    "assistant_id": 123
  }'
```

### 8. Call Transfers (SIP REFER)

For call transfers, configure the transfer tool with SIP URI format:

```json
{
  "type": "transferCall",
  "destinations": [
    {
      "type": "sip",
      "sipUri": "sip:+15557654321@sip.zadarma.com"
    }
  ]
}
```

<Note>
Some providers require E.164 formatting with the `+` prefix: `sip:+15557654321@sip.provider.com`
</Note>

### 9. Provider-Specific Examples

<Tabs>
  <Tab title="Zadarma">
    ```json
    {
      "sip_gateway": "sip.zadarma.com",
      "sip_username": "YOUR_SIP_NUMBER",
      "sip_password": "YOUR_SIP_PASSWORD",
      "sip_trunk_config": {
        "inbound_enabled": false,
        "outbound_leading_plus_enabled": true,
        "auth_plan": {
          "type": "credentials"
        }
      }
    }
    ```
  </Tab>
  
  <Tab title="VoIP.ms">
    ```json
    {
      "sip_gateway": "sip.voip.ms",
      "sip_username": "your_account",
      "sip_password": "your_password",
      "sip_trunk_config": {
        "inbound_enabled": true,
        "outbound_leading_plus_enabled": true,
        "auth_plan": {
          "type": "credentials"
        }
      }
    }
    ```
  </Tab>
  
  <Tab title="Generic SIP">
    ```json
    {
      "sip_gateway": "sip.yourprovider.com",
      "sip_username": "your_username",
      "sip_password": "your_password",
      "sip_trunk_config": {
        "sip_domain": "yourprovider.com",
        "inbound_enabled": true,
        "outbound_leading_plus_enabled": true,
        "gateways": [
          {
            "ip": "sip.yourprovider.com",
            "inbound_enabled": true,
            "port": 5060
          }
        ],
        "auth_plan": {
          "type": "credentials",
          "username": "your_username",
          "password": "your_password"
        }
      }
    }
    ```
  </Tab>
</Tabs>

### 10. Features & Limitations

**Supported:**
- ‚úÖ Inbound calls (with provider webhook configuration)
- ‚úÖ Outbound calls
- ‚úÖ Call transfers (SIP REFER)
- ‚úÖ Call recording (application-level)
- ‚úÖ Credential-based and IP-based authentication

**Not Supported:**
- ‚ùå SMS/MMS (most SIP trunks are voice-only)
- ‚ùå Phone number search/purchase via API (use provider portal)
- ‚ùå Automatic webhook configuration (manual setup required)

### 11. Troubleshooting

<AccordionGroup>
  <Accordion title="401 Unauthorized Errors">
    - Verify SIP credentials are correct
    - Ensure all signaling IP addresses are whitelisted
    - Check if IP-based auth is properly configured
  </Accordion>
  
  <Accordion title="Calls Not Routing">
    - Confirm webhook URL is accessible from your provider
    - Check SIP URI format matches provider requirements
    - Verify phone number is registered in Burki database
  </Accordion>
  
  <Accordion title="Transfer Not Working">
    - Enable SIP REFER on your provider
    - Verify transfer destination format (some providers require E.164)
    - Check provider supports blind transfers
  </Accordion>
</AccordionGroup>

</Accordion>

---

## Mixed Environment Examples

### Use Case 1: Cost Optimization
```json
// High-volume sales assistant - use BYO SIP for lowest costs
{
  "name": "Sales Dialer Bot",
  "phone_numbers": [
    {
      "phone_number": "+15551234567",
      "provider": "byo-sip-trunk"
    }
  ]
}

// Standard support - use Telnyx for good balance
{
  "name": "Support Bot",
  "phone_numbers": [
    {
      "phone_number": "+15559876543",
      "provider": "telnyx"
    }
  ]
}

// Premium support assistant - use Twilio for reliability
{
  "name": "VIP Support Bot", 
  "phone_numbers": [
    {
      "phone_number": "+15555555555",
      "provider": "twilio"
    }
  ]
}
```

### Use Case 2: Geographic Optimization
```json
// US/Canada assistant - use Telnyx for better rates
{
  "name": "North America Bot",
  "telnyx_config": {
    "api_key": "KEYxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",
    "connection_id": "1234567890"
  }
}

// International assistant - use Twilio for global coverage
{
  "name": "Global Support Bot",
  "twilio_config": {
    "account_sid": "ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxx", 
    "auth_token": "your_twilio_auth_token"
  }
}
```

---

## Provider Migration

### Gradual Migration
You can migrate assistants from one provider to another without downtime:

<CodeGroup>
```json Before (Twilio Only)
{
  "name": "Customer Service Bot",
  "twilio_config": {
    "account_sid": "ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",
    "auth_token": "your_twilio_auth_token"
  }
}
```

```json After (Switch to Telnyx)  
{
  "name": "Customer Service Bot",
  "telnyx_config": {
    "api_key": "KEYxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",
    "connection_id": "1234567890"
  },
  "twilio_config": {
    "account_sid": null,
    "auth_token": null
  }
}
```
</CodeGroup>

### Bulk Migration
Use the API to migrate multiple assistants:

```python
import requests

# List all assistants
assistants = requests.get("/api/v1/assistants").json()

# Migrate each one
for assistant in assistants:
    requests.put(f"/api/v1/assistants/{assistant['id']}", json={
        "telnyx_config": {
            "api_key": "KEYxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",
            "connection_id": "1234567890"
        },
        "twilio_config": {
            "account_sid": None,
            "auth_token": None
        }
    })
```

---

## Troubleshooting

<AccordionGroup>
  <Accordion title="Call Not Connecting">
    **Check:**
    - Webhook URLs are correct and accessible
    - Credentials are valid and have proper permissions
    - Phone number is assigned to correct assistant
    - Provider account has sufficient balance
  </Accordion>
  
  <Accordion title="Poor Audio Quality">
    **Twilio:** Ensure Media Streams are enabled
    
    **Telnyx:** Check Call Control Application settings
    
    **Both:** Verify network connectivity and bandwidth
  </Accordion>
  
  <Accordion title="Provider Detection Issues">
    **Check priority order:**
    1. Assistant-level config
    2. Organization-level config  
    3. Environment variables
    
    **Debug:** Check assistant object in API response to see detected provider
  </Accordion>
</AccordionGroup>

---

## Best Practices

- **Start with one provider** and add the second for specific use cases
- **Test thoroughly** when switching providers for existing assistants
- **Monitor costs** and usage patterns to optimize provider selection
- **Keep credentials secure** and rotate them regularly
- **Use environment variables** for global defaults, per-assistant config for exceptions

---

## What's Next?

<CardGroup cols={2}>
  <Card title="üìû Call Management" href="/call-management" icon="phone">
    Configure call handling, transfers, and timeouts
  </Card>
  
  <Card title="üéôÔ∏è Audio Configuration" href="/ai-configuration" icon="microphone">
    Set up TTS/STT providers for voice processing
  </Card>
</CardGroup>

